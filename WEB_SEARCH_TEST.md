# Claude Code Web Search 功能测试

## 测试前准备

1. **确保已重启 Claude Code**
2. **配置已生效**（Web Search 已启用）

## 测试用例

### 测试 1：基础搜索能力
```
搜索最新的 DeepSeek V3 模型的发布信息和主要特点
```

**期望结果**：
- ✅ 显示搜索过程
- ✅ 提供 2-3 个来源链接
- ✅ 总结 DeepSeek V3 的特点
- ✅ 信息基于真实来源

---

### 测试 2：对比分析搜索
```
搜索并对比 Perplexity 和 ChatGPT 的搜索功能差异
```

**期望结果**：
- ✅ 搜索多个来源
- ✅ 提供对比表格或清单
- ✅ 每个观点都有来源链接
- ✅ 信息客观准确

---

### 测试 3：技术架构搜索
```
搜索 NotebookLM 的技术实现原理，特别是它如何处理文档和生成摘要
```

**期望结果**：
- ✅ 技术细节来自官方或可信来源
- ✅ 提供具体的 URL
- ✅ 区分官方信息和社区讨论
- ✅ 信息时效性（最新的）

---

### 测试 4：中文搜索能力
```
搜索中国 AI 产品经理需要掌握的核心技能
```

**期望结果**：
- ✅ 支持中文搜索
- ✅ 返回中文来源
- ✅ 信息相关性高
- ✅ 有来源链接

---

### 测试 5：多维度综合搜索（您的实际需求）
```
搜索以下三个 AI 产品的技术架构信息，重点关注它们在记忆、规划、工具使用、反思四个维度的实现：
1. Perplexity
2. Google Gemini
3. NotebookLM

请提供：
- 各产品的核心功能和技术特点
- 它们如何处理记忆（短期/长期）
- 规划能力（任务分解、多步骤推理）
- 工具使用能力（API调用、外部工具集成）
- 是否有反思或自我改进机制
- 所有信息的来源网址
```

**期望结果**：
- ✅ 搜索所有三个产品
- ✅ 按四个维度组织信息
- ✅ 每个维度都有来源链接
- ✅ 结构化呈现（表格或清单）
- ✅ 总结对比各产品的侧重点

---

## 如何判断搜索成功

### ✅ 成功的标志：
1. **看到搜索过程**：
   ```
   🔍 WebSearch("query")
   Did 3 searches in 8s
   ```

2. **有来源链接**：
   ```
   根据 [来源1](https://example.com) 和 [来源2](https://example.com)...
   ```

3. **信息新鲜**：
   - 提到最近的日期
   - 包含最新功能或更新

4. **多源验证**：
   - 引用多个不同来源
   - 信息相互印证

### ❌ 失败的标志：
1. **没有搜索过程**：
   - 直接开始回答
   - 没有 "WebSearch" 提示

2. **没有来源**：
   - 回答中没有链接
   - 或链接是编造的

3. **信息过时**：
   - 基于训练数据回答
   - 没有最新信息

4. **出现之前的错误**：
   ```
   Error: Claude Code is unable to fetch from...
   ```

---

## 快速测试命令

在重启的 Claude Code 中，直接运行：

```
测试网络搜索：搜索 2024 年最受欢迎的 AI 编程助手有哪些？
```

---

## 故障排查

如果搜索不工作：

### 检查 1：配置是否生效
```bash
# 检查配置文件
cat ~/.claude/settings.json | grep -A2 "CLAUDE_CODE_DISABLE"
# 应该显示 "0" 而不是 "1"
```

### 检查 2：是否真的重启了
```bash
# 查看 Claude Code 进程启动时间
ps aux | grep claude
# 应该是最近几分钟内启动的
```

### 检查 3：尝试明确要求
```
请使用网络搜索工具查找最新的 AI 新闻
```

### 检查 4：查看是否有网络限制
```bash
# 测试网络连接
curl -I https://www.google.com
```

---

## 测试结果记录模板

```
测试日期：2025-12-28
测试用例：[填写]
结果：✅/❌
观察：
- 是否显示搜索过程：
- 是否提供来源链接：
- 信息准确性：
- 响应速度：
问题（如有）：
```

---

## 高级测试（可选）

### 测试实时信息
```
搜索今天（2025年12月28日）的 AI 行业新闻
```

### 测试专业搜索
```
搜索学术论文：Transformer 架构的最新改进
```

### 测试限制处理
```
搜索无法访问的内容，看如何处理（如被墙网站）
```

---

现在可以开始测试了！建议从测试 1 开始，逐步验证功能。

